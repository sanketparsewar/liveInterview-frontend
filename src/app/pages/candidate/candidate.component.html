<nav class="bg-gray-800">
  <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
    <div class="relative flex h-16 items-center justify-between">
      <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">

        <button type="button"
          class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:ring-2 focus:ring-white focus:outline-hidden focus:ring-inset"
          aria-controls="mobile-menu" aria-expanded="false">
          <span class="absolute -inset-0.5"></span>
          <span class="sr-only">Open main menu</span>

          <svg class="block size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
            aria-hidden="true" data-slot="icon">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>

          <svg class="hidden size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
            aria-hidden="true" data-slot="icon">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
        <div class="flex shrink-0 items-center">
          <img class="h-8 w-auto" src="https://tailwindui.com/plus-assets/img/logos/mark.svg?color=indigo&shade=500"
            alt="Your Company">
        </div>

      </div>

    </div>
  </div>
</nav>



<div class="flex items-center justify-center min-h-screen bg-gray-100" *ngIf="!challenge?.isActive && !challenge?.startTime">
  <div class="max-w-md bg-white rounded-2xl shadow-lg p-6">
    <div class="text-center">
      <h2 class="text-xl font-semibold text-gray-800">Ready to Start?</h2>
      <p class="text-gray-600 mt-2">Click below to begin your challenge.</p>
      <button
        class="mt-4 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-full shadow-md transition-transform transform hover:scale-105"
        (click)="startChallenge(challenge._id)">
        ðŸš€ Start Challenge
      </button>
    </div>
  </div>
</div>


<div class="w-full h-screen mx-0 overflow-hidden" *ngIf="challenge?.isActive">
  <div class="w-full h-full rounded shadow-lg bg-white flex flex-col">
    <div class="font-bold text-xl m-2 flex justify-between items-center">
      {{ challenge?.name }}
      <span>
        <button
          class="btn bg-red-500 hover:bg-red-700 text-white font-bold  rounded-full px-3 py-1 text-sm font-semibold text-gray-700"
          *ngIf="!challenge.endTime" (click)="updateChallengeSessionStatus()">End Challenge</button>
      </span>
    </div>
    <iframe [attr.src]="safeStackBlitzUrl" class="w-full h-full flex-grow" title="StackBlitz Preview">
    </iframe>
  </div>
</div>


<div class="flex items-center justify-center" *ngIf="challenge?.isActive===false">
  <div class="max-w-md bg-white rounded-2xl overflow-hidden shadow-xl p-6">
    <div class="text-center">
      <h2 class="text-lg font-semibold text-gray-800">ðŸŽ‰ Challenge Submitted!</h2>
      <p class="text-gray-600 mt-2">
        Your challenge has been submitted successfully.
      </p>
    </div>
    <div class="flex flex-wrap justify-center mt-4">
      <span class="bg-blue-100 text-blue-600 rounded-full px-4 py-1 text-sm font-medium mr-2 mb-2">Start Time:
        {{challenge?.startTime |date:"hh:mm a" }}</span>
      <span class="bg-green-100 text-green-600 rounded-full px-4 py-1 text-sm font-medium mr-2 mb-2">End Time:
        {{challenge?.endTime | date:"hh:mm a" }}</span>
      <span class="bg-purple-100 text-purple-600 rounded-full px-4 py-1 text-sm font-medium mr-2 mb-2"> Total Time:
        {{challenge?.totalTime | number:".2-2"}} min</span>
    </div>
  </div>
</div>